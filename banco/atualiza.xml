<?xml version="1.0"?>
<script>
	<sql id="1">CREATE TRIGGER tb_atualizacoes_before_insert BEFORE INSERT ON tb_atualizacoes FOR EACH ROW BEGIN SET NEW.dt_cadastro :=	NOW(); END;</sql>
	<sql id="2">CREATE TRIGGER tb_atualizacoes_before_update BEFORE UPDATE ON tb_atualizacoes FOR EACH ROW BEGIN SET NEW.dt_atualizacao	:=	NOW(); END;</sql>
	<sql id="3">CREATE ALGORITHM=UNDEFINED SQL SECURITY DEFINER VIEW tb_clientesemail_v AS select a.id AS ID, a.id_cliente AS ID_CLIENTE, b.ds_setor AS DS_SETOR, a.ds_email AS DS_EMAIL, a.recebe_aso AS RECEBE_ASO, b.id AS ID_SETOR from (tb_clientesemail a join tb_setores b on((b.id = a.id_setor))); </sql>
	<sql id="4">CREATE ALGORITHM=UNDEFINED SQL SECURITY DEFINER VIEW tb_enderecoscli_v AS select b.id AS id, b.dt_cadastro AS dt_cadastro, b.dt_atualizacao AS dt_atualizacao, b.id_tipoend AS id_tipoend, b.logradouro AS logradouro, b.nr_logradouro AS nr_logradouro, b.nr_regiao AS nr_regiao, b.nr_estado AS nr_estado, b.nr_cidade AS nr_cidade, b.ds_bairro AS ds_bairro, a.id_cliente AS id_cliente, a.id_endereco AS id_endereco, c.ds_tipo AS ds_tipo, d.Nome AS regiao, e.Nome AS estado, f.Nome AS cidade from (((((tb_outrosendcli a join tb_enderecos b on((a.id_endereco = b.id))) join tb_tipoend c on((c.id = b.id_tipoend))) join tb_regiao d on((d.Id = b.nr_regiao))) join tb_estado e on((e.Id = b.nr_estado))) join tb_municipio f on((f.Id = b.nr_cidade))); </sql>
	<sql id="5">CREATE ALGORITHM=UNDEFINED SQL SECURITY DEFINER VIEW tb_enderecos_v AS select a.id AS id, a.dt_cadastro AS dt_cadastro, a.dt_atualizacao AS dt_atualizacao, a.id_tipoend AS id_tipoend, a.logradouro AS logradouro, a.nr_logradouro AS nr_logradouro, a.nr_regiao AS nr_regiao, a.nr_estado AS nr_estado, a.nr_cidade AS nr_cidade, a.ds_bairro AS ds_bairro, b.ds_tipo AS tipoend, c.Nome AS nomeregiao, d.Nome AS nomeestado, e.Nome AS nomecidade from ((((tb_enderecos a left join tb_tipoend b on((b.id = a.id_tipoend))) left join tb_regiao c on((c.Id = a.nr_regiao))) left join tb_estado d on((d.Id = a.nr_estado))) left join tb_municipio e on((e.Id = a.nr_cidade))); </sql>
	<sql id="6">CREATE ALGORITHM=UNDEFINED SQL SECURITY DEFINER VIEW tb_ordemserv_v AS select a.id AS id, a.dt_cadastro AS dt_cadastro, a.dt_atualizacao AS dt_atualizacao, a.titulo AS titulo, a.desc_os AS desc_os, a.enc_os_usuario AS enc_os_usuario, a.status AS status, b.ds_status AS ds_status from (tb_ordemserv a join tb_statusoss b on((b.id = a.status))); </sql>
	<sql id="7">CREATE TABLE tb_tipohistorico_os (id INT NOT NULL AUTO_INCREMENT, dt_cadastro DATETIME NULL, dt_atualizacao DATETIME NULL, ds_tipohist VARCHAR(50) NULL DEFAULT NULL, is_ativo INT NULL DEFAULT 1, PRIMARY KEY (id)) COLLATE=utf8mb4_0900_ai_ci; </sql>
	<sql id="8">CREATE TRIGGER tb_tipohistorico_os_before_insert BEFORE INSERT ON tb_tipohistorico_os FOR EACH ROW BEGIN SET NEW.dt_cadastro :=	NOW(); END;	</sql>
	<sql id="9">CREATE TRIGGER tb_tipohistorico_os_before_update BEFORE UPDATE ON tb_tipohistorico_os FOR EACH ROW BEGIN SET NEW.dt_atualizacao	:=	NOW(); END; </sql>
	<sql id="10">INSERT INTO TB_TIPOHISTORICO_OS (DS_TIPOHIST) VALUES ('Comunicação interna');</sql>
	<sql id="11">INSERT INTO TB_TIPOHISTORICO_OS (DS_TIPOHIST) VALUES ('Atualização');</sql>
	<sql id="12">UPDATE TB_ORDEMSERV SET STATUS = 5 WHERE ID = 2;</sql>
	<sql id="13">CREATE TABLE tb_historicoos (id INT NOT NULL AUTO_INCREMENT, dt_cadastro DATETIME NULL,dt_atualizacao DATETIME NULL, id_usuario INT NULL DEFAULT NULL, id_tipohist INT NULL DEFAULT NULL, id_ordem INT NULL DEFAULT NULL, desc_historico VARCHAR(4000) NULL DEFAULT NULL, PRIMARY KEY (id), CONSTRAINT FK__tb_tipohistorico_os FOREIGN KEY (id_tipohist) REFERENCES tb_tipohistorico_os (id) ON UPDATE NO ACTION ON DELETE NO ACTION, CONSTRAINT FK__tb_ordemserv FOREIGN KEY (id_ordem) REFERENCES tb_ordemserv (id) ON UPDATE NO ACTION ON DELETE NO ACTION, CONSTRAINT FK__tb_usuarios_historicoos FOREIGN KEY (id_usuario) REFERENCES tb_usuarios (id) ON UPDATE NO ACTION ON DELETE NO ACTION) COLLATE=utf8mb4_0900_ai_ci;</sql>
	<sql id="14">CREATE TRIGGER tb_historicoos_before_insert BEFORE INSERT ON tb_historicoos FOR EACH ROW BEGIN SET NEW.dt_cadastro	:=	NOW(); END;</sql>
	<sql id="15">CREATE TRIGGER tb_historicoos_before_update BEFORE UPDATE ON tb_historicoos FOR EACH ROW BEGIN SET NEW.dt_atualizacao	:=	NOW(); END;</sql>
	<sql id="16">CREATE PROCEDURE HistoricoAutom(IN id_tipohist_p INT, IN id_ordem_p INT, IN ds_historico_p VARCHAR(4000)) LANGUAGE SQL NOT DETERMINISTIC CONTAINS SQL SQL SECURITY DEFINER COMMENT 'Insere histórico automático' BEGIN INSERT INTO tb_historicoos (id_tipohist,id_ordem,desc_historico) VALUES (id_tipohist_p,id_ordem_p,ds_historico_p); END;</sql>
	<sql id="17">DROP TRIGGER IF EXISTS tb_ordemserv_before_update;</sql>
	<sql id="18">ALTER TABLE tb_usuarios ADD COLUMN pode_usar INT NULL DEFAULT '1' AFTER parametros; </sql>
	<sql id="19">INSERT INTO TB_USUARIOS (USUARIO,SENHA,PARAMETROS,PODE_USAR) VALUES ('WINDOWS','BC8187E7121792235DE0FE4911E11796DAB5BBE3',1,0);</sql>
	<sql id="20">CREATE DEFINER=root@localhost TRIGGER tb_ordemserv_before_update BEFORE UPDATE ON tb_ordemserv FOR EACH ROW BEGIN SET NEW.dt_atualizacao := NOW(); END;</sql>
	<sql id="21">CREATE ALGORITHM = UNDEFINED SQL SECURITY DEFINER VIEW tb_historicoos_lista_v AS SELECT A.id, A.id_tipohist, A.id_ordem, A.id_usuario, A.desc_historico, A.dt_cadastro, A.dt_atualizacao, B.ds_tipohist, C.usuario FROM tb_historicoos A INNER	JOIN tb_tipohistorico_os B ON B.id = A.id_tipohist LEFT	JOIN tb_usuarios C ON C.id = a.id_usuario;</sql>
	<sql id="22">CREATE TRIGGER tb_ordemserv_before_delete BEFORE DELETE ON tb_ordemserv FOR EACH ROW BEGIN DELETE FROM tb_historicoos WHERE id_ordem = OLD.id; END;</sql>
	<sql id="23">CREATE TABLE tb_anexosos (id INT NOT NULL AUTO_INCREMENT, dt_cadastro DATETIME NULL, dt_atualizacao DATETIME NULL, id_ordem INT NULL, nome_arquivo VARCHAR(50) NULL, caminho_arquivo VARCHAR(4000) NULL, PRIMARY KEY (id), CONSTRAINT FK__tb_ordemserv_anexos FOREIGN KEY (id_ordem) REFERENCES tb_ordemserv (id) ON UPDATE NO ACTION ON DELETE NO ACTION) COLLATE='utf8mb4_0900_ai_ci';</sql>
	<sql id="24">CREATE TRIGGER tb_anexosos_before_insert BEFORE INSERT ON tb_anexosos FOR EACH ROW BEGIN SET NEW.DT_CADASTRO := NOW(); END;</sql>
	<sql id="25">CREATE TRIGGER tb_anexosos_before_update BEFORE UPDATE ON tb_anexosos FOR EACH ROW BEGIN SET NEW.DT_ATUALIZACAO := NOW(); END;</sql>
	<sql id="26">DROP TRIGGER IF EXISTS tb_ordemserv_before_delete;</sql>
	<sql id="27">CREATE DEFINER=root@localhost TRIGGER tb_ordemserv_before_delete BEFORE DELETE ON tb_ordemserv FOR EACH ROW BEGIN DELETE FROM tb_historicoos WHERE id_ordem = OLD.id; DELETE FROM tb_anexosos WHERE id_ordem = OLD.id; END;</sql>
	<sql id="28">ALTER TABLE tb_parametrosgerais CHANGE COLUMN permite_gravarlog permite_gravarlog VARCHAR(1) NULL DEFAULT NULL AFTER dt_atualizacao;</sql>
	<sql id="29">ALTER TABLE tb_parametrosgerais CHANGE COLUMN cria_novasordens cria_novasordens VARCHAR(1) NULL DEFAULT NULL AFTER dt_atualizacao;</sql>
	<sql id="30">UPDATE medisoft.tb_parametrosgerais SET permite_gravarlog='S' WHERE  id=1;</sql>
	<sql id="31">UPDATE medisoft.tb_parametrosgerais SET cria_novasordens='S' WHERE  id=1;</sql>
	<sql id="32">ALTER TABLE tb_parametrosgerais ADD COLUMN ds_listaordens VARCHAR(1) NULL DEFAULT 'S' AFTER ds_nomelogsql;</sql>
	<sql id="33">ALTER TABLE tb_parametrosgerais ADD COLUMN nome_parametro VARCHAR(50) NULL DEFAULT NULL AFTER dt_atualizacao;</sql>
	<sql id="34">UPDATE tb_parametrosgerais SET nome_parametro = 'ADMINISTRADOR' WHERE ID = 1;</sql>
	<sql id="35">ALTER TABLE tb_parametrosgerais ADD COLUMN ds_adicionahistorico VARCHAR(1) NULL DEFAULT 'S' AFTER ds_listaordens;</sql>
	<sql id="36">ALTER TABLE tb_parametrosgerais ADD COLUMN ds_adicionaanexos VARCHAR(1) NULL DEFAULT 'S' AFTER ds_adicionahistorico;</sql>
	<sql id="37">ALTER TABLE tb_parametrosgerais ADD COLUMN ds_acessaordensserv VARCHAR(1) NULL DEFAULT 'S' AFTER ds_adicionaanexos;</sql>
	<sql id="38">ALTER TABLE tb_parametrosgerais ADD COLUMN ds_imprimeordemserv VARCHAR(1) NULL DEFAULT 'S' AFTER ds_acessaordensserv;</sql>
	<sql id="39">CREATE TABLE tb_funcoessistema (id INT NOT NULL AUTO_INCREMENT,dt_cadastro DATETIME NULL,dt_atualizacao DATETIME NULL,nome_funcao VARCHAR(50) NULL DEFAULT NULL,PRIMARY KEY (id))COLLATE='utf8mb4_0900_ai_ci';</sql>
	<sql id="40">CREATE TRIGGER tb_funcoessistema_before_insert BEFORE INSERT ON tb_funcoessistema FOR EACH ROW BEGIN SET NEW.DT_CADASTRO := NOW(); END;</sql>
	<sql id="41">CREATE TRIGGER tb_funcoessistema_before_update BEFORE UPDATE ON tb_funcoessistema FOR EACH ROW BEGIN SET NEW.DT_ATUALIZACAO := NOW(); END;</sql>
	<sql id="42">CREATE TABLE tb_relatorio (id INT NOT NULL AUTO_INCREMENT,dt_cadastro DATETIME NULL,dt_atualizacao DATETIME NULL,nome_relatorio VARCHAR(50) NULL DEFAULT NULL,id_funcao INT NULL DEFAULT NULL,PRIMARY KEY (id),CONSTRAINT FK__tb_funcoessistema FOREIGN KEY (id_funcao) REFERENCES tb_funcoessistema (id) ON UPDATE NO ACTION ON DELETE NO ACTION) COLLATE='utf8mb4_0900_ai_ci';</sql>
	<sql id="43">CREATE TRIGGER tb_relatorio_before_insert BEFORE INSERT ON tb_relatorio FOR EACH ROW BEGIN SET NEW.DT_CADASTRO := NOW(); END;</sql>
	<sql id="44">CREATE TRIGGER tb_relatorio_before_update BEFORE UPDATE ON tb_relatorio FOR EACH ROW BEGIN SET NEW.DT_ATUALIZACAO := NOW(); END;</sql>
	<sql id="45">CREATE TABLE tb_tipocamporelat (id INT NOT NULL AUTO_INCREMENT,dt_cadastro DATETIME NULL,dt_atualizacao DATETIME NULL,nome_campo VARCHAR(50) NULL DEFAULT NULL,PRIMARY KEY (id)) COLLATE='utf8mb4_0900_ai_ci';</sql>
	<sql id="46">CREATE TRIGGER tb_tipocamporelat_before_insert BEFORE INSERT ON tb_tipocamporelat FOR EACH ROW BEGIN SET NEW.DT_CADASTRO := NOW(); END;</sql>
	<sql id="47">CREATE TRIGGER tb_tipocamporelat_before_update BEFORE UPDATE ON tb_tipocamporelat FOR EACH ROW BEGIN SET NEW.DT_ATUALIZACAO := NOW(); END;</sql>
	<sql id="48">INSERT INTO TB_TIPOCAMPORELAT (NOME_CAMPO) VALUES ('TRLReport');</sql>
	<sql id="49">INSERT INTO TB_TIPOCAMPORELAT (NOME_CAMPO) VALUES ('TRLBand');</sql>
	<sql id="50">INSERT INTO TB_TIPOCAMPORELAT (NOME_CAMPO) VALUES ('TRLDetailGrid');</sql>
	<sql id="51">INSERT INTO TB_TIPOCAMPORELAT (NOME_CAMPO) VALUES ('TRLGroup');</sql>
	<sql id="52">INSERT INTO TB_TIPOCAMPORELAT (NOME_CAMPO) VALUES ('TRLSubDetail');</sql>
	<sql id="53">INSERT INTO TB_TIPOCAMPORELAT (NOME_CAMPO) VALUES ('TRLLabel');</sql>
	<sql id="54">INSERT INTO TB_TIPOCAMPORELAT (NOME_CAMPO) VALUES ('TRLAngleLabel');</sql>
	<sql id="55">INSERT INTO TB_TIPOCAMPORELAT (NOME_CAMPO) VALUES ('TRLDBText');</sql>
	<sql id="56">INSERT INTO TB_TIPOCAMPORELAT (NOME_CAMPO) VALUES ('TRLMemo');</sql>
	<sql id="57">INSERT INTO TB_TIPOCAMPORELAT (NOME_CAMPO) VALUES ('TRLDBMemo');</sql>
	<sql id="58">INSERT INTO TB_TIPOCAMPORELAT (NOME_CAMPO) VALUES ('TRLRichText');</sql>
	<sql id="59">INSERT INTO TB_TIPOCAMPORELAT (NOME_CAMPO) VALUES ('TRLDBRichText');</sql>
	<sql id="60">INSERT INTO TB_TIPOCAMPORELAT (NOME_CAMPO) VALUES ('TRLImage');</sql>
	<sql id="61">INSERT INTO TB_TIPOCAMPORELAT (NOME_CAMPO) VALUES ('TRLSystemInfo');</sql>
	<sql id="62">INSERT INTO TB_TIPOCAMPORELAT (NOME_CAMPO) VALUES ('TRLDraw');</sql>
	<sql id="63">INSERT INTO TB_TIPOCAMPORELAT (NOME_CAMPO) VALUES ('TRLPanel');</sql>
	<sql id="64">INSERT INTO TB_TIPOCAMPORELAT (NOME_CAMPO) VALUES ('TRLDBResult');</sql>
	<sql id="65">INSERT INTO TB_TIPOCAMPORELAT (NOME_CAMPO) VALUES ('TRLBarcode');</sql>
	<sql id="66">INSERT INTO TB_TIPOCAMPORELAT (NOME_CAMPO) VALUES ('TRLDBBarcode');</sql>
	<sql id="67">INSERT INTO TB_TIPOCAMPORELAT (NOME_CAMPO) VALUES ('TRLPreview');</sql>
	<sql id="68">INSERT INTO TB_TIPOCAMPORELAT (NOME_CAMPO) VALUES ('TRLExpressionParser');</sql>
	<sql id="69">INSERT INTO TB_TIPOCAMPORELAT (NOME_CAMPO) VALUES ('TRLDraftFilter');</sql>
	<sql id="70">INSERT INTO TB_TIPOCAMPORELAT (NOME_CAMPO) VALUES ('TRLRichFilter');</sql>
	<sql id="71">INSERT INTO TB_TIPOCAMPORELAT (NOME_CAMPO) VALUES ('TRLHTMLFilter');</sql>
	<sql id="72">INSERT INTO TB_TIPOCAMPORELAT (NOME_CAMPO) VALUES ('TRLPDFFilter');</sql>
	<sql id="73">INSERT INTO TB_TIPOCAMPORELAT (NOME_CAMPO) VALUES ('TRLXLSFilter');</sql>
	<sql id="74">INSERT INTO TB_TIPOCAMPORELAT (NOME_CAMPO) VALUES ('TRLXLSXFilter');</sql>
	<sql id="75">INSERT INTO TB_TIPOCAMPORELAT (NOME_CAMPO) VALUES ('TRLPreviewSetup');</sql>
	<sql id="76">CREATE TABLE tb_camposrelatorio (id INT NOT NULL AUTO_INCREMENT,dt_cadastro DATETIME NULL,dt_atualizacao DATETIME NULL,id_relat INT NULL DEFAULT NULL,id_campo INT NULL DEFAULT NULL,topvalue INT NULL DEFAULT NULL,leftvalue INT NULL DEFAULT NULL,PRIMARY KEY (id),CONSTRAINT FK__tb_relatorio FOREIGN KEY (id_relat) REFERENCES tb_relatorio (id) ON UPDATE NO ACTION ON DELETE NO ACTION,CONSTRAINT FK__tb_tipocamporelat FOREIGN KEY (id_campo) REFERENCES tb_tipocamporelat (id) ON UPDATE NO ACTION ON DELETE NO ACTION) COLLATE='utf8mb4_0900_ai_ci';</sql>
	<sql id="77">CREATE TRIGGER tb_camposrelatorio_before_insert BEFORE INSERT ON tb_camposrelatorio FOR EACH ROW BEGIN SET NEW.DT_CADASTRO := NOW(); END;</sql>
	<sql id="78">CREATE TRIGGER tb_camposrelatorio_before_update BEFORE UPDATE ON tb_camposrelatorio FOR EACH ROW BEGIN SET NEW.DT_ATUALIZACAO := NOW(); END;</sql>
	<sql id="79">INSERT INTO TB_FUNCOESSISTEMA (NOME_FUNCAO) VALUES ('Ordem de serviço');</sql>
	<sql id="80">INSERT INTO TB_RELATORIO (NOME_RELATORIO,ID_FUNCAO) VALUES ('Informações sobre esta ordem de serviço',1);</sql>
	<sql id="81">INSERT INTO TB_CAMPOSRELATORIO (ID_RELAT,ID_CAMPO,TOPVALUE,LEFTVALUE) VALUES (1,1,8,8);</sql>
	<sql id="82">CREATE TABLE tb_tipobandarelat (id INT NOT NULL AUTO_INCREMENT,dt_cadastro DATETIME NULL,dt_atualizacao DATETIME NULL,ds_tipobanda VARCHAR(50) NULL,PRIMARY KEY (id)) COLLATE='utf8mb4_0900_ai_ci';</sql>
	<sql id="83">CREATE TRIGGER tb_tipobandarelat_before_insert BEFORE INSERT ON tb_tipobandarelat FOR EACH ROW BEGIN SET NEW.DT_CADASTRO := NOW(); END;</sql>
	<sql id="84">CREATE TRIGGER tb_tipobandarelat_before_update BEFORE UPDATE ON tb_tipobandarelat FOR EACH ROW BEGIN SET NEW.DT_ATUALIZACAO := NOW(); END;</sql>
	<sql id="85">INSERT INTO TB_TIPOBANDARELAT (DS_TIPOBANDA) VALUES ('btColumnFooter');</sql>
	<sql id="86">INSERT INTO TB_TIPOBANDARELAT (DS_TIPOBANDA) VALUES ('btColumnHeader');</sql>
	<sql id="87">INSERT INTO TB_TIPOBANDARELAT (DS_TIPOBANDA) VALUES ('btDetail');</sql>
	<sql id="88">INSERT INTO TB_TIPOBANDARELAT (DS_TIPOBANDA) VALUES ('btFooter');</sql>
	<sql id="89">INSERT INTO TB_TIPOBANDARELAT (DS_TIPOBANDA) VALUES ('btHeader');</sql>
	<sql id="90">INSERT INTO TB_TIPOBANDARELAT (DS_TIPOBANDA) VALUES ('btSummary');</sql>
	<sql id="91">INSERT INTO TB_TIPOBANDARELAT (DS_TIPOBANDA) VALUES ('btTitle');</sql>
	<sql id="92">ALTER TABLE tb_camposrelatorio	ADD COLUMN id_tipobanda INT(10) NULL DEFAULT NULL AFTER leftvalue,ADD CONSTRAINT FK_tb_camposrelatorio_tb_tipobandarelat FOREIGN KEY (id_tipobanda) REFERENCES tb_tipobandarelat (id) ON UPDATE NO ACTION ON DELETE NO ACTION;</sql>
	<sql id="93">ALTER TABLE tb_camposrelatorio ADD COLUMN texto_label varchar(50) NULL DEFAULT NULL AFTER id_tipobanda;</sql>
	<sql id="94">UPDATE TB_CAMPOSRELATORIO SET TEXTO_LABEL = 'TESTE DE RELATÓRIO' WHERE 1=1 AND ID = 1;</sql>
	<sql id="95">INSERT INTO TB_CAMPOSRELATORIO (ID_RELAT,ID_CAMPO,TOPVALUE,LEFTVALUE,ID_TIPOBANDA) VALUES (1,2,8,8,5);</sql>
	<sql id="96">INSERT INTO TB_CAMPOSRELATORIO (ID_RELAT,ID_CAMPO,TOPVALUE,LEFTVALUE,TEXTO_LABEL) VALUES (1,6,8,8,'TESTE DE RELATÓRIO');</sql>
</script>